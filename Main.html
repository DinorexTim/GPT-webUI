<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta lang="en">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ChatPUAğŸ‘ğŸ»</title>
    <script src="https://cdn.bootcss.com/marked/0.8.1/marked.min.js"></script>
    <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 0;
    }

    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .mainbox {
      background-color: #fff;
      border-radius: 4px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
      width: 75%;
    }
    .mainbox h2 {
      margin-top: 0;
      font-size: 24px;
      text-align: center;
    }

    .mainbox h6 {
      margin-top: 0;
      text-align: right;
    }

    .mainbox input {
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 8px;
      box-sizing: border-box;
      width: 100%;
      height: 50px;
    }

    .mainbox button{
      background-color: #333;
      color: #fff;
      border: 0;
      border-radius: 20px;
      cursor: pointer;
      padding: 10px;
      width: 20%;
      height: 100%;
      float: right;
      margin: 5px;
    }

    .mainbox button:hover{
        transition-duration: 0.3s;
        background-color: #45a049;
    }
    .interaction{
      border: 2px solid black;
      height: 400px;
      overflow-y: scroll;
      margin-bottom: 8px;
      border-radius: 10px;
    }

    .interaction button{
      height: 5%;
      width: 20%;
      padding-bottom: 10px;
      margin-bottom: 5px;
      height: 100%;
      float: right;
    }
    .content{
      padding-left: 10px;
    }
    .ReplyContent{
      border:1px solid black;
      border-radius: 10px;
      word-break: break-all;
      padding-left: 5px;
      padding-right: 5px;
    }
    /* .ReplyContent button{
      width: 60px;
      margin-right: 2px;
      border-radius: 20px;
      margin: 5px;
    } */
    .options {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      padding: 10px;
    } 
    .audiototext{
      height: 40px;
      width: 40px;
      cursor: pointer;
    }
    .texttoimage{
      height: 40px;
      width: 40px;
      cursor: pointer;
    }
    .prompt{
      height: 40px;
      width: 40px;
      cursor: pointer;
      border-radius: 50%;
    }
    </style>
</head>
<body>
  <div class="container">
    <div class="mainbox">
        <h2>ChatPUAğŸ‘ğŸ»</h2>
        <h6 class="author">shitted by DINOREXNB</h6>
        <div class="interaction" id="interaction">       
        </div>
        <div>
          <input type="text" placeholder="let's chat!" name="text" id="query">
        </div>
        <div>
          <img src="./images/audiototext.png" alt="" id="audiototext" class="audiototext">
          <img src="./images/texttoimage.png" alt="" id="texttoimage" class="audiototext">
          <img src="./images/prompt.png" alt="" id="prompt" class="prompt">
          <button type="submit" value="å‘é€" id="submit">å‘é€</button>
        </div>
    </div>
  </div>
  <div class="options">
    <div class="models" style="display: inline-block; margin-left: 20px;margin:auto">
      <h2 style="height: 10px;">Models</h2>
      <form>
        <input type="radio" id="model1" name="option" value="option1">
        <label for="model1"><b>gpt-4 (PLUS only)</b></label><br>
        <input type="radio" id="model2" name="option" value="option2" checked>
        <label for="model2"><b>gpt-3.5-turbo</b></label><br>
        <input type="radio" id="model3" name="option" value="option3">
        <label for="model3"><b>gpt-3.5-turbo-0613</b></label>
      </form>
    </div>
    <div class="context-linkage" style="display: inline-block;margin: auto;">
      <h2 style="margin-top: 0px;">Context Linkage</h2>
        <input type="checkbox" id="Context-linkage" name="Context-linkage" value="option2" checked>
        <label for="Context-linkage"><b>True</b></label><br>
    </div>
    <div class="temperature" style="display: inline-block;margin:auto" id="temperature">
        <div id="value"><h2 style="height: 45px;">Temperature:0.5</h2></div>
        <input type="range" min="0" max="9" id="temperature-range">
    </div>
  </div>
  <div class="options">
    <div class="" style="display: inline-block; margin:auto">
      <div id="numofimages"><h2 style="height: 45px;">Num of images:1</h2></div>
      <input type="range" min="1" max="10" id="images-range" value="1">
    </div>
    <div class="Image size" style="display: inline-block;margin: auto;" id="Image size">
        <div id="value"><h2 style="height: 10px;">Image size</h2></div>
       <input type="radio" id="size1" name="option" value="option1" checked>
        <label for="size1"><b>256x256</b></label><br>
        <input type="radio" id="size2" name="option" value="option2">
        <label for="size2"><b>512x512</b></label><br>
        <input type="radio" id="size3" name="option" value="option3">
        <label for="size3"><b>1024x1024</b></label>
    </div>
  </div>
  <div id="reply0"></div>
  <script> 
    const btn=document.getElementById("submit");
    const interaction=document.getElementById("interaction");
    const MODEL1=document.getElementById("model1");
    const MODEL2=document.getElementById("model2");
    const MODEL3=document.getElementById("model3");
    const Contextlinkage=document.getElementById("Context-linkage")
    const Temperature=document.getElementById("temperature");
    const prompt=document.getElementById("prompt");
    const audiototext=document.getElementById("audiototext");
    const texttoimage=document.getElementById("texttoimage");
    const SIZE1=document.getElementById("size1");
    const SIZE2=document.getElementById("size2");
    const SIZE3=document.getElementById("size3");
    const NUMofIMAGES=document.getElementById("images-range");

    var orgid="";
    var APIkey="";
    var query="";
    var model="gpt-3.5-turbo";
    var isContextLinkage=1;
    var temperature=5;
    var historical_dialogue=[];    
    var historical_reply=[];
    var historical_tocopy=[];
    var replyID=0;
    var max_dialogue_record=10;
    var size="256x256";
    var numofimages=1;
    var formaudio = new FormData();

    //é€‰æ‹©æ¨¡å‹***********************************
    MODEL1.addEventListener('input',()=>{
      model="gpt-4";
      console.log("model: "+model);
    })
    MODEL2.addEventListener('input',()=>{
      model="gpt-3.5-turbo";
      console.log("model: "+model);
    })
    MODEL3.addEventListener('input',()=>{
      model="gpt-3.5-turbo-0613";
      console.log("model: "+model);
    })

    //é€‰æ‹©å›¾åƒå¤§å°***********************************
    SIZE1.addEventListener("click",()=>{
      size="256x256";
      console.log("image size:256x256");
    });
    SIZE2.addEventListener("click",()=>{
      size="512x512";
      console.log("image size:512x512");
    });
    SIZE3.addEventListener("click",()=>{
      size="1024x1024";
      console.log("image size:1024x1024");
    });

    //é€‰æ‹©å›¾åƒæ•°é‡***********************************
    NUMofIMAGES.addEventListener("input",()=>{
      numofimages=NUMofIMAGES.value;
      document.getElementById("numofimages").innerHTML=`<h2 style="height: 45px;">Num of images:${numofimages}</h2></h2>`;
    });

    //é€‰æ‹©æ˜¯å¦è”ç³»ä¸Šä¸‹æ–‡***********************************
    Contextlinkage.addEventListener('input',()=>{
      isContextLinkage=1-isContextLinkage;
      console.log("Context Linkage:"+isContextLinkage);
    })

    //é€‰æ‹©é€†å¤©ç¨‹åº¦***********************************
    Temperature.addEventListener('input',()=>{
      temperature=document.getElementById("temperature-range").value;
      document.getElementById("value").innerHTML=`<h2 style="height: 50px;">Temperature:${temperature/10}</h2>`;
    })

    //è·å–è¾“å…¥çš„orgidä¸APIkey***********************************
    fetch('get-info')
    .then(response=>response.json())
    .then(data=>{
      orgid=data.orgid;
      APIkey=data.APIkey;
    })
    .catch(error=>console.log(error));

    //æ·»åŠ é¢„è®¾äººæ ¼***********************************
    prompt.addEventListener('click',()=>{
      if(document.getElementById("query").value!=''){
        console.log("å·²å‘é€è¯·æ±‚...");     
        query=document.getElementById("query").value;
        document.getElementById("query").value='';
        console.log("query: "+query);
        if(replyID!=0){
          document.getElementById(`regenerate${replyID-1}`).innerHTML='';
        }
        //æ·»åŠ ç”¨æˆ·å†å²å¯¹è¯
        historical_dialogue=historical_dialogue.concat([{"role":"user","content":query}]);
        if(historical_dialogue.length>max_dialogue_record){
          historical_dialogue.shift();
        }
        console.log("å†å²å¯¹è¯:");
        console.log(JSON.stringify(historical_dialogue));
        //å‘é€è¯·æ±‚
        const xhr = new XMLHttpRequest();
        xhr.open('POST', 'https://api.openai.com/v1/chat/completions');
        xhr.setRequestHeader('Authorization', 'Bearer '+APIkey);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onload = function() {
          if (xhr.status === 200) {
            let Response=JSON.parse(xhr.responseText);
            console.log(xhr.responseText);
            interaction.innerHTML=interaction.innerHTML+`
            <div class="content" id="replyprompt">
              <h3>PUA:</h3>
              <div class="ReplyContent">
              <p>äººæ ¼åŠ è½½æˆåŠŸï¼</p>
              </div>
            </div>
            `;
            //æ·»åŠ GPTå†å²å¯¹è¯
            historical_dialogue=historical_dialogue.concat([{"role":"assistant","content":Response.choices[0].message.content}]);
            if(historical_dialogue.length>max_dialogue_record){
              historical_dialogue.shift();
            }
            console.log(historical_reply);
          }else{
            interaction.innerHTML=interaction.innerHTML+`
            <div class="content">
              <h3>PUA:</h3>
              <div class="ReplyContent">
              <p>âŒè¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š${xhr.status}</p>
              </div>
            </div>
            `;
            interaction.scrollTop=interaction.scrollHeight;
            console.log(historical_reply);
            console.error('è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š' + xhr.status + 'ï¼Œé”™è¯¯ä¿¡æ¯ï¼š' + xhr.statusText);
          }
        };
        if(isContextLinkage){
          const data = {
            "model": model,
            "messages": historical_dialogue,
            "temperature": temperature/10,
          };
          console.log(data);
          xhr.send(JSON.stringify(data));
        }else{
          const data = {
            "model": model,
            "messages": [{"role":"user","content":query}],
            "temperature": temperature/10,
          };
          console.log(data);
          xhr.send(JSON.stringify(data));
        }
      }
    });
    //è¯­éŸ³è½¬æ–‡å­—(bug)***********************************
    audiototext.addEventListener('click',()=>{
      query=document.getElementById("query").value;
      document.getElementById("query").value='';
      console.log("query: "+query);
      console.log("é€‰æ‹©éŸ³é¢‘æ–‡ä»¶...");
      const input = document.createElement('input');
      input.type = 'file';
      input.accept="audio/*"
      // å½“ç”¨æˆ·é€‰æ‹©æ–‡ä»¶æ—¶è§¦å‘
      input.addEventListener('change', () => {
        // è·å–ç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶
        const file = input.files[0];
        const reader=new FileReader();
        if(replyID){
          document.getElementById(`regenerate${replyID-1}`).innerHTML='';
        }
        reader.addEventListener('load',()=>{
          //ä¸Šä¼ æ–‡ä»¶
          const xhr = new XMLHttpRequest();
          xhr.open('POST', 'https://api.openai.com/v1/audio/transcriptions');
          xhr.setRequestHeader('Authorization', 'Bearer '+APIkey);
          xhr.setRequestHeader('Content-Type', 'multipart/form-data');
          xhr.onload = function() {
            if (xhr.status === 200) {
              let Response=JSON.parse(xhr.responseText);
              console.log(Response);
              //å¢æ·»å›å¤
              interaction.innerHTML=interaction.innerHTML+`
              <div class="content">
                <h3>PUA:</h3>
                <div class="ReplyContent">
                <p>${Response.text}</p>
                </div>
              </div>
              `;
              interaction.scrollTop=interaction.scrollHeight;
            }else{
              interaction.innerHTML=interaction.innerHTML+`
              <div class="content">
                <h3>PUA:</h3>
                <div class="ReplyContent">
                <p>âŒè¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š${xhr.status}</p>
                </div>
              </div>
              `;
              interaction.scrollTop=interaction.scrollHeight;
              console.error('è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š' + xhr.status + 'ï¼Œé”™è¯¯ä¿¡æ¯ï¼š' + xhr.statusText);
            }
          };
          // åˆ›å»ºä¸€ä¸ªFormdataå¯¹è±¡ï¼Œå¹¶å°†æ–‡ä»¶æ·»åŠ åˆ°å…¶ä¸­
          formaudio.append("file", file);
          formaudio.append("model", 'whisper-1');
          formaudio.append("prompt",query);
          //æ‰“å°
          console.log(file);
          formaudio.forEach((value, key) => {
            console.log(`${key}: ${value}`);
          });
          xhr.send(formaudio);
        });
        // å¼€å§‹è¯»å–æ–‡ä»¶
        reader.readAsBinaryString(file);
      });
      input.click();
    });
    //æ–‡å­—ç”Ÿæˆå›¾ç‰‡***********************************
    texttoimage.addEventListener('click',()=>{
      if(document.getElementById("query").value!=''){
        console.log("å·²å‘é€è¯·æ±‚...");     
        interaction.innerHTML=interaction.innerHTML+`
        <div class="content">
          <h3>You:</h3>
          <div class="ReplyContent">
          <p>${document.getElementById("query").value}</p>
          </div>
        </div>
        `;
        interaction.scrollTop=interaction.scrollHeight;
        query=document.getElementById("query").value;
        document.getElementById("query").value='';
        console.log("query: "+query);
        if(replyID){
          document.getElementById(`regenerate${replyID-1}`).innerHTML='';
        }
        //å‘é€è¯·æ±‚
        const xhr = new XMLHttpRequest();
        xhr.open('POST', 'https://api.openai.com/v1/images/generations');
        xhr.setRequestHeader('Authorization', 'Bearer '+APIkey);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onload = function() {
          if (xhr.status === 200) {
            let Response=JSON.parse(xhr.responseText);
            console.log(Response);
            //å¢æ·»å›å¤
            interaction.innerHTML=interaction.innerHTML+`
              <div class="content">
                <h3>PUA:</h3>
              </div>
              `;
            for(var cnt=0;cnt<numofimages;cnt++){
              interaction.innerHTML=interaction.innerHTML+`
              <div class="content">
                <img src='${Response.data[cnt].url}' alt=''>
              </div>
              `;
              interaction.scrollTop=interaction.scrollHeight;
            }
          }else{
            interaction.innerHTML=interaction.innerHTML+`
            <div class="content">
              <h3>PUA:</h3>
              <div class="ReplyContent">
              <p>âŒè¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š${xhr.status}</p>
              </div>
            </div>
            `;
            interaction.scrollTop=interaction.scrollHeight;
            console.error('è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š' + xhr.status + 'ï¼Œé”™è¯¯ä¿¡æ¯ï¼š' + xhr.statusText);
          }
        };
        const data = {
          "prompt": query,
          "n":parseInt(numofimages),
          "size":size,
        };
        console.log(data);
        xhr.send(JSON.stringify(data));
      }
    });
    //é‡æ–°ç”Ÿæˆå›å¤***********************************
    function resendrequest(){      
      console.log("Regenerating...");
      historical_dialogue.pop();
      if(replyID){
       document.getElementById(`reply${replyID-1}`).innerHTML='';
      }
      console.log("å·²å‘é€è¯·æ±‚...");
      console.log("query: "+query);
      console.log("å†å²å¯¹è¯:");
      console.log(JSON.stringify(historical_dialogue));
      //å‘é€è¯·æ±‚
      const xhr = new XMLHttpRequest();
      xhr.open('POST', 'https://api.openai.com/v1/chat/completions');
      xhr.setRequestHeader('Authorization', 'Bearer '+APIkey);
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.onload = function() {
        if (xhr.status === 200) {
          let Response=JSON.parse(xhr.responseText);
          console.log(Response);
          //æ·»åŠ GPTå†å²å¯¹è¯
          historical_dialogue=historical_dialogue.concat([{"role":"assistant","content":Response.choices[0].message.content}]);
          if(historical_dialogue.length>max_dialogue_record){
            historical_dialogue.shift();
          }
          //å¢æ·»å›å¤
          var htmltext=marked(Response.choices[0].message.content);
          interaction.innerHTML=interaction.innerHTML+`
          <div class="content" id="reply${replyID}">
            <h3>PUA:</h3>
            <div class="ReplyContent" id="ReplyContent${replyID}">
            ${htmltext}
            </div>
            <button id="${replyID}" onclick="copyContent(this.id)">Copy</button>
            <div id="regenerate${replyID}">
              <button id="regeneratebtn${replyID}">Regenerate</button>
            </div>
          </div>
          `;
          interaction.scrollTop=interaction.scrollHeight;
          historical_reply.push(document.getElementById(`regeneratebtn${replyID}`));
          historical_reply[replyID].addEventListener('click',resendrequest);
          // historical_tocopy.push(document.getElementById(`ReplyContent${replyID}`))
          // historical_tocopy[replyID].addEventListener('mouseover',showCopyButton);
          // historical_tocopy[replyID].addEventListener('mouseout',hideCopyButton);
          replyID++;
          console.log(historical_reply);
        }else{
          interaction.innerHTML=interaction.innerHTML+`
          <div class="content" id=reply${replyID}>
            <h3>PUA:</h3>
            <div class="ReplyContent" id="ReplyContent${replyID}">
            <p>âŒè¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š${xhr.status}</p>
            </div>
            <div id="regenerate${replyID}">
               <button id="regeneratebtn${replyID}">Regenerate</button>
            </div>
          </div>
         `;
          interaction.scrollTop=interaction.scrollHeight;
          historical_reply.push(document.getElementById(`regeneratebtn${replyID}`));
          historical_reply[replyID].addEventListener('click',resendrequest);
          // historical_tocopy.push(document.getElementById(`ReplyContent${replyID}`))
          replyID++;
          console.log(historical_reply);
          console.error('è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š' + xhr.status + 'ï¼Œé”™è¯¯ä¿¡æ¯ï¼š' + xhr.statusText);
       }
       };
       if(isContextLinkage){
         const data = {
           "model": model,
           "messages": historical_dialogue,
           "temperature": temperature/10,
         };
         console.log(data);
         xhr.send(JSON.stringify(data));
        }else{
          const data = {
            "model": model,
            "messages": [{"role":"user","content":query}],
            "temperature": temperature/10,
          };
          console.log(data);
          xhr.send(JSON.stringify(data));
        }
    }
    //ç”Ÿæˆå›å¤***********************************
    function sendrequest(){
      if(document.getElementById("query").value!=''){
        console.log("å·²å‘é€è¯·æ±‚...");     
        interaction.innerHTML=interaction.innerHTML+`
        <div class="content">
          <h3>You:</h3>
          <div class="ReplyContent">
          <p>${document.getElementById("query").value}</p>
          </div>
        </div>
        `;
        interaction.scrollTop=interaction.scrollHeight;
        query=document.getElementById("query").value;
        document.getElementById("query").value='';
        console.log("query: "+query);
        if(replyID!=0){
          var errortext="";
          try{
            document.getElementById(`regenerate${replyID-1}`).innerHTML='';
          }catch(error){
            errortext=error
            console.log(errortext);
          }
          if(errortext==""){
            document.getElementById(`regenerate${replyID-1}`).innerHTML='';
          }
        }
        //æ·»åŠ ç”¨æˆ·å†å²å¯¹è¯
        historical_dialogue=historical_dialogue.concat([{"role":"user","content":query}]);
        if(historical_dialogue.length>max_dialogue_record){
          historical_dialogue.shift();
        }
        console.log("å†å²å¯¹è¯:");
        console.log(JSON.stringify(historical_dialogue));
        //å‘é€è¯·æ±‚
        const xhr = new XMLHttpRequest();
        xhr.open('POST', 'https://api.openai.com/v1/chat/completions');
        xhr.setRequestHeader('Authorization', 'Bearer '+APIkey);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onload = function() {
          if (xhr.status === 200) {
            let Response=JSON.parse(xhr.responseText);
            console.log(Response);
            //æ·»åŠ GPTå†å²å¯¹è¯
            historical_dialogue=historical_dialogue.concat([{"role":"assistant","content":Response.choices[0].message.content}]);
            if(historical_dialogue.length>max_dialogue_record){
              historical_dialogue.shift();
            }
            //å¢æ·»å›å¤
            var htmltext=marked(Response.choices[0].message.content);
            interaction.innerHTML=interaction.innerHTML+`
            <div class="content" id="reply${replyID}">
              <h3>PUA:</h3>
              <div class="ReplyContent" id="ReplyContent${replyID}">
                ${htmltext}
              </div>
              <button id="${replyID}" onclick="copyContent(this.id)">Copy</button>
              <div id="regenerate${replyID}">
                <button id="regeneratebtn${replyID}">Regenerate</button>
              </div>
            </div>
            `;
            interaction.scrollTop=interaction.scrollHeight;
            historical_reply.push(document.getElementById(`regeneratebtn${replyID}`));
            historical_reply[replyID].addEventListener('click',resendrequest);
            // historical_tocopy.push(document.getElementById(`ReplyContent${replyID}`))
            // historical_tocopy[replyID].addEventListener('mouseover',showCopyButton);
            // historical_tocopy[replyID].addEventListener('mouseout',hideCopyButton);
            replyID++;
            console.log(historical_reply);
          }else{
            interaction.innerHTML=interaction.innerHTML+`
            <div class="content" id=reply${replyID}>
              <h3>PUA:</h3>
              <div class="ReplyContent" id="ReplyContent${replyID}">
              <p>âŒè¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š${xhr.status}</p>
              </div>
              <div id="regenerate${replyID}">
                <button id="regeneratebtn${replyID}">Regenerate</button>
              </div>
            </div>
            `;
            interaction.scrollTop=interaction.scrollHeight;
            historical_reply.push(document.getElementById(`regeneratebtn${replyID}`));
            historical_reply[replyID].addEventListener('click',resendrequest);
            // historical_tocopy.push(document.getElementById(`ReplyContent${replyID}`))
            replyID++;
            console.log(historical_reply);
            console.error('è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š' + xhr.status + 'ï¼Œé”™è¯¯ä¿¡æ¯ï¼š' + xhr.statusText);
          }
        };
        if(isContextLinkage){
          const data = {
            "model": model,
            "messages": historical_dialogue,
            "temperature": temperature/10,
          };
          console.log(data);
          xhr.send(JSON.stringify(data));
        }else{
          const data = {
            "model": model,
            "messages": [{"role":"user","content":query}],
            "temperature": temperature/10,
          };
          console.log(data);
          xhr.send(JSON.stringify(data));
        }
      }
    }
    //ä½¿ç”¨å›è½¦å‘é€å†…å®¹ç”Ÿæˆå›å¤***********************************
    function sendrequestKey(){
      if(event.code=='Enter'){
        sendrequest();
      }
    }
    btn.addEventListener("click",sendrequest);
    //å›è½¦å‘é€å†…å®¹***********************************
    document.addEventListener("keydown",sendrequestKey);
    //å¤åˆ¶å¯¹è¯å†…å®¹***********************************
    function copyContent(id){
      var content_text=document.getElementById(`ReplyContent${id}`).innerText;
      var textarea=document.createElement("textarea");
      textarea.value=content_text;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
    }
  </script>
</body>
</html>